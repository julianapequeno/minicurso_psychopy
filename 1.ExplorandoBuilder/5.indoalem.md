### 游游 Indo al칠m: Como posso misturar dados de texto e imagens dentro dos meus loops em blocos de trials?

Bom, e se as planilhas fossem desta forma?

- **frutas.cv**

    | imagens | 
    | ---- |
    | banana.png |
    | maca.png |
    | pera.png |

- **cidades.csv**

    | cidades | 
    | ---- |
    | Natal |
    | Toronto|
    | Belo Horizonte |


Bom, neste caso temos um desafio, dado que caso utilizemos a vari치vel de uma, por exemplo `$imagens` dentro de qualquer componente da rotina, quando a planilha `cidades.csv` estiver no loop, o programa retornar치 um erro. N칚o existe essa vari치vel (coluna) nesta planilha. Pelo menos, caso sigamos o padr칚o que constru칤 para o 칰ltimo exemplo:

<br>
<br>
<div align="center">
<img src="1.ExplorandoBuilder/images/nestedloop.jpeg" height=250 >
</div>
<br>

Se usarmos mais de um loop dentro de `blocoTrials`, vou cham치-lo de `trials_3`, setando o `Selected Rows` do `trials_2` para 0 e o `Selected Rows` do `trials_3` para 1 (indicando cada linha do frutas_e_cidades.csv), ter칤amos ent칚o uma outra resolu칞칚o. E funcionaria. Por칠m, os dados ficariam separados em loops diferentes.


Ent칚o, para usar o mesmo loop, como fizemos no exemplo anterior, seria necess치rio usarmos codifica칞칚o em python com o `Code component`. Eu deixei um experimento pronto aqui no reposit칩rio para caso algu칠m tenha interesse em ver como foi feito. Basicamente usando um `Text Component`, `Image Component` e um `Code Component`. O c칩digo 칠 bem f치cil de entender e vou explicar aqui embaixo para os curiosos.

Note que cada componente 칠 uma vari치vel no programa, assim como as colunas das planilhas, como vimos anteriormente. Aqui, o que fiz foi o seguinte: 

-  Coloquei o`Image Component` com o nome de `image_comp`, escolhi uma imagem aleat칩ria dentro da minha pasta para ser a imagem do componente no `Image` e setei o par칙metro como `set every frame`. Al칠m disso, na aba de layout, determinei a opacidade da imagem como 0, signfica que ela est치 invis칤vel.
- No `Text Component` eu coloquei o texto como a vari치vel `$fb`.
- No `Code component`, eu coloquei no `Begin Routine` o c칩digo:
    ```python
        fb = ''
    ```
    Com o intuito de inicializar a vari치vel.
- Ainda no `Code component`, na aba `every frame`, utilizei o c칩digo abaixo:
    ```python
        if planilhas == 'frutas.csv':
            image_comp.setOpacity(1)
            image_comp.setImage(imagens)
        else:
            fb = cidades
            image_comp.setOpacity(0.0)
    ```
    Se a vari치vel planilhas estiver com o valor == `frutas.csv`, significa que o loop `trials_2` est치 rodando dentro dessa planilha. Logo, os itens s칚o imagens! Ent칚o, eu devolvo a opacidade total da imagem (para que ela apare칞a na tela) e ent칚o determino qual imagem quero que apare칞a. Essa vari치vel, `imagens` a coluna da planilha `frutas.csv`, ent칚o a cada frame uma linha ser치 selecionada como valor de `imagens`. Assim, o c칩digo ir치 atribuir a imagem atual ao componente `image_comp`.
    Caso contr치ro, a vari치vel `planilhas` est치 com o valor `cidades.csv`, dado que s칩 temos essas duas op칞칫es em nossa planilha (nada impede que adicionemos mais). Logo, estamos trabalhando com textos, pois sabemos que essa planilha possui nomes de cidades. Assim, utilizaremos a vari치vel j치 criada `fb` e atribuiremos  ela o valor de `cidades`, campo do `cidades.csv`. Ap칩s isso, o componente `image_comp` tem a sua opacidade setada para 0 novamente para evitar que a imagem cubra a visualiza칞칚o do texto.

E assim temos o nosso experimento com diferentes tipos de dados de difentes bases de entrada! :)

 O c칩digo e seus utilit치rios (imagens e planilhas) est칚o nesta pasta: [nestedLoopsVariousTypesOfFiles](experimentos/nestedLoopsVariousTypesOfFiles/)





